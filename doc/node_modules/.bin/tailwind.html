<!DOCTYPE html>
<html>
<head>
  <title>tailwind</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/tailwind";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>tailwind</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-meta">"use strict"</span>;
<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
    <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-keyword">const</span> _path = <span class="hljs-comment">/*#__PURE__*/</span> _interopRequireDefault(<span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>));
<span class="hljs-keyword">const</span> _arg = <span class="hljs-comment">/*#__PURE__*/</span> _interopRequireDefault(<span class="hljs-built_in">require</span>(<span class="hljs-string">"arg"</span>));
<span class="hljs-keyword">const</span> _fs = <span class="hljs-comment">/*#__PURE__*/</span> _interopRequireDefault(<span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>));
<span class="hljs-keyword">const</span> _build = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./cli/build"</span>);
<span class="hljs-keyword">const</span> _help = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./cli/help"</span>);
<span class="hljs-keyword">const</span> _init = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./cli/init"</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_interopRequireDefault</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : {
        <span class="hljs-attr">default</span>: obj
    };
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isESM</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> pkgPath = _path.default.resolve(<span class="hljs-string">"./package.json"</span>);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">let</span> pkg = <span class="hljs-built_in">JSON</span>.parse(_fs.default.readFileSync(pkgPath, <span class="hljs-string">"utf8"</span>));
        <span class="hljs-keyword">return</span> pkg.type &amp;&amp; pkg.type === <span class="hljs-string">"module"</span>;
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
<span class="hljs-keyword">let</span> configs = isESM() ? {
    <span class="hljs-attr">tailwind</span>: <span class="hljs-string">"tailwind.config.cjs"</span>,
    <span class="hljs-attr">postcss</span>: <span class="hljs-string">"postcss.config.cjs"</span>
} : {
    <span class="hljs-attr">tailwind</span>: <span class="hljs-string">"tailwind.config.js"</span>,
    <span class="hljs-attr">postcss</span>: <span class="hljs-string">"postcss.config.js"</span>
};
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">oneOf</span>(<span class="hljs-params">...options</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.assign(<span class="hljs-function">(<span class="hljs-params">value = <span class="hljs-literal">true</span></span>)=&gt;</span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> option <span class="hljs-keyword">of</span> options){
            <span class="hljs-keyword">let</span> parsed = option(value);
            <span class="hljs-keyword">if</span> (parsed === value) {
                <span class="hljs-keyword">return</span> parsed;
            }
        }
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"..."</span>);
    }, {
        <span class="hljs-attr">manualParsing</span>: <span class="hljs-literal">true</span>
    });
}
<span class="hljs-keyword">let</span> commands = {
    <span class="hljs-attr">init</span>: {
        <span class="hljs-attr">run</span>: _init.init,
        <span class="hljs-attr">args</span>: {
            <span class="hljs-string">"--full"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">`Initialize a full \`<span class="hljs-subst">${configs.tailwind}</span>\` file`</span>
            },
            <span class="hljs-string">"--postcss"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">`Initialize a \`<span class="hljs-subst">${configs.postcss}</span>\` file`</span>
            },
            <span class="hljs-string">"-f"</span>: <span class="hljs-string">"--full"</span>,
            <span class="hljs-string">"-p"</span>: <span class="hljs-string">"--postcss"</span>
        }
    },
    <span class="hljs-attr">build</span>: {
        <span class="hljs-attr">run</span>: _build.build,
        <span class="hljs-attr">args</span>: {
            <span class="hljs-string">"--input"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Input file"</span>
            },
            <span class="hljs-string">"--output"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Output file"</span>
            },
            <span class="hljs-string">"--watch"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Watch for changes and rebuild as needed"</span>
            },
            <span class="hljs-string">"--poll"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Use polling instead of filesystem events when watching"</span>
            },
            <span class="hljs-string">"--content"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Content paths to use for removing unused classes"</span>
            },
            <span class="hljs-string">"--purge"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
                <span class="hljs-attr">deprecated</span>: <span class="hljs-literal">true</span>
            },
            <span class="hljs-string">"--postcss"</span>: {
                <span class="hljs-attr">type</span>: oneOf(<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Boolean</span>),
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Load custom PostCSS configuration"</span>
            },
            <span class="hljs-string">"--minify"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Minify the output"</span>
            },
            <span class="hljs-string">"--config"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Path to a custom config file"</span>
            },
            <span class="hljs-string">"--no-autoprefixer"</span>: {
                <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,
                <span class="hljs-attr">description</span>: <span class="hljs-string">"Disable autoprefixer"</span>
            },
            <span class="hljs-string">"-c"</span>: <span class="hljs-string">"--config"</span>,
            <span class="hljs-string">"-i"</span>: <span class="hljs-string">"--input"</span>,
            <span class="hljs-string">"-o"</span>: <span class="hljs-string">"--output"</span>,
            <span class="hljs-string">"-m"</span>: <span class="hljs-string">"--minify"</span>,
            <span class="hljs-string">"-w"</span>: <span class="hljs-string">"--watch"</span>,
            <span class="hljs-string">"-p"</span>: <span class="hljs-string">"--poll"</span>
        }
    }
};
<span class="hljs-keyword">let</span> sharedFlags = {
    <span class="hljs-string">"--help"</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-built_in">Boolean</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Display usage information"</span>
    },
    <span class="hljs-string">"-h"</span>: <span class="hljs-string">"--help"</span>
};
<span class="hljs-keyword">if</span> (process.stdout.isTTY <span class="hljs-comment">/* Detect redirecting output to a file */</span>  &amp;&amp; <span class="hljs-function">(<span class="hljs-params">process.argv[<span class="hljs-number">2</span>] === <span class="hljs-literal">undefined</span> || process.argv.slice(<span class="hljs-number">2</span></span>).<span class="hljs-params">every</span>(<span class="hljs-params">(flag</span>)=&gt;</span>sharedFlags[flag] !== <span class="hljs-literal">undefined</span>))) {
    (<span class="hljs-number">0</span>, _help.help)({
        <span class="hljs-attr">usage</span>: [
            <span class="hljs-string">"tailwindcss [--input input.css] [--output output.css] [--watch] [options...]"</span>,
            <span class="hljs-string">"tailwindcss init [--full] [--postcss] [options...]"</span>
        ],
        <span class="hljs-attr">commands</span>: <span class="hljs-built_in">Object</span>.keys(commands).filter(<span class="hljs-function">(<span class="hljs-params">command</span>)=&gt;</span>command !== <span class="hljs-string">"build"</span>).map(<span class="hljs-function">(<span class="hljs-params">command</span>)=&gt;</span><span class="hljs-string">`<span class="hljs-subst">${command}</span> [options]`</span>),
        <span class="hljs-attr">options</span>: {
            ...commands.build.args,
            ...sharedFlags
        }
    });
    process.exit(<span class="hljs-number">0</span>);
}
<span class="hljs-keyword">let</span> command = <span class="hljs-function">(<span class="hljs-params">(arg = <span class="hljs-string">""</span></span>)=&gt;</span>arg.startsWith(<span class="hljs-string">"-"</span>) ? <span class="hljs-literal">undefined</span> : arg)(process.argv[<span class="hljs-number">2</span>]) || <span class="hljs-string">"build"</span>;
<span class="hljs-keyword">if</span> (commands[command] === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">if</span> (_fs.default.existsSync(_path.default.resolve(command))) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>TODO: Deprecate this in future versions
Check if non-existing command, might be a file.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        command = <span class="hljs-string">"build"</span>;
    } <span class="hljs-keyword">else</span> {
        (<span class="hljs-number">0</span>, _help.help)({
            <span class="hljs-attr">message</span>: <span class="hljs-string">`Invalid command: <span class="hljs-subst">${command}</span>`</span>,
            <span class="hljs-attr">usage</span>: [
                <span class="hljs-string">"tailwindcss &lt;command&gt; [options]"</span>
            ],
            <span class="hljs-attr">commands</span>: <span class="hljs-built_in">Object</span>.keys(commands).filter(<span class="hljs-function">(<span class="hljs-params">command</span>)=&gt;</span>command !== <span class="hljs-string">"build"</span>).map(<span class="hljs-function">(<span class="hljs-params">command</span>)=&gt;</span><span class="hljs-string">`<span class="hljs-subst">${command}</span> [options]`</span>),
            <span class="hljs-attr">options</span>: sharedFlags
        });
        process.exit(<span class="hljs-number">1</span>);
    }
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Execute command</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">let</span> { <span class="hljs-attr">args</span>: flags , run  } = commands[command];
<span class="hljs-keyword">let</span> args = <span class="hljs-function">(<span class="hljs-params">(</span>)=&gt;</span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">let</span> result = (<span class="hljs-number">0</span>, _arg.default)(<span class="hljs-built_in">Object</span>.fromEntries(<span class="hljs-built_in">Object</span>.entries({
            ...flags,
            ...sharedFlags
        }).filter(<span class="hljs-function">(<span class="hljs-params">[_key, value]</span>)=&gt;</span>{
            <span class="hljs-keyword">var</span> ref;
            <span class="hljs-keyword">return</span> !(value === <span class="hljs-literal">null</span> || value === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> : (ref = value.type) === <span class="hljs-literal">null</span> || ref === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> ? <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> : ref.manualParsing);
        }).map(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>)=&gt;</span>[
                key,
                <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> ? value.type : value
            ])), {
            <span class="hljs-attr">permissive</span>: <span class="hljs-literal">true</span>
        });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Manual parsing of flags to allow for special flags like oneOf(Boolean, String)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = result[<span class="hljs-string">"_"</span>].length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i){
            <span class="hljs-keyword">let</span> flag = result[<span class="hljs-string">"_"</span>][i];
            <span class="hljs-keyword">if</span> (!flag.startsWith(<span class="hljs-string">"-"</span>)) <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">let</span> flagName = flag;
            <span class="hljs-keyword">let</span> handler = flags[flag];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>Resolve flagName &amp; handler</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">while</span>(<span class="hljs-keyword">typeof</span> handler === <span class="hljs-string">"string"</span>){
                flagName = handler;
                handler = flags[handler];
            }
            <span class="hljs-keyword">if</span> (!handler) <span class="hljs-keyword">continue</span>;
            <span class="hljs-keyword">let</span> args = [];
            <span class="hljs-keyword">let</span> offset = i + <span class="hljs-number">1</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>Parse args for current flag</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">while</span>(result[<span class="hljs-string">"_"</span>][offset] &amp;&amp; !result[<span class="hljs-string">"_"</span>][offset].startsWith(<span class="hljs-string">"-"</span>)){
                args.push(result[<span class="hljs-string">"_"</span>][offset++]);
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>Cleanup manually parsed flags + args</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            result[<span class="hljs-string">"_"</span>].splice(i, <span class="hljs-number">1</span> + args.length);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>Set the resolved value in the <code>result</code> object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            result[flagName] = handler.type(args.length === <span class="hljs-number">0</span> ? <span class="hljs-literal">undefined</span> : args.length === <span class="hljs-number">1</span> ? args[<span class="hljs-number">0</span>] : args, flagName);
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>Ensure that the <code>command</code> is always the first argument in the <code>args</code>.
This is important so that we don't have to check if a default command
(build) was used or not from within each plugin.</p>
<p>E.g.: tailwindcss input.css -&gt; _: ['build', 'input.css']
E.g.: tailwindcss build input.css -&gt; _: ['build', 'input.css']</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (result[<span class="hljs-string">"_"</span>][<span class="hljs-number">0</span>] !== command) {
            result[<span class="hljs-string">"_"</span>].unshift(command);
        }
        <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-keyword">if</span> (err.code === <span class="hljs-string">"ARG_UNKNOWN_OPTION"</span>) {
            (<span class="hljs-number">0</span>, _help.help)({
                <span class="hljs-attr">message</span>: err.message,
                <span class="hljs-attr">usage</span>: [
                    <span class="hljs-string">"tailwindcss &lt;command&gt; [options]"</span>
                ],
                <span class="hljs-attr">options</span>: sharedFlags
            });
            process.exit(<span class="hljs-number">1</span>);
        }
        <span class="hljs-keyword">throw</span> err;
    }
})();
<span class="hljs-keyword">if</span> (args[<span class="hljs-string">"--help"</span>]) {
    (<span class="hljs-number">0</span>, _help.help)({
        <span class="hljs-attr">options</span>: {
            ...flags,
            ...sharedFlags
        },
        <span class="hljs-attr">usage</span>: [
            <span class="hljs-string">`tailwindcss <span class="hljs-subst">${command}</span> [options]`</span>
        ]
    });
    process.exit(<span class="hljs-number">0</span>);
}
run(args, configs);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
